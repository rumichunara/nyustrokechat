<!DOCTYPE html>
<html lang="en" ng-app="app" ng-controller="MainController as m">
  <head ln-cms-meta="{{vm.meta}}">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="format-detection" content="telephone=no"/>
    <meta name="fragment" content="!" />
    <base href="/">
    
    <!-- font inclusion -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    <!-- Disable tap highlight on IE -->
    <meta name="msapplication-tap-highlight" content="no">

    <!-- Web Application Manifest -->
    <link rel="manifest" href="manifest.json">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="NYU Chat">
    <meta name="theme-color" content="#303F9F">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="NYU Chat">
    <meta name="apple-mobile-web-app-status-bar-style" content="#303F9F">

    <!-- Tile icon for Win8 -->
    <meta name="msapplication-TileColor" content="#3372DF">
    <meta name="msapplication-navbutton-color" content="#303F9F">

    <!-- styles inclusion -->
    <link rel="stylesheet" href="css/style.css">
  </head>
  <body data-has-loader="true" class="ng-cloak">
    <!--[if lt IE 7]>
    <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade
        your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Authentication -->
    <div class="{{ (user == null) ? 'authentication' : '' }} mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <main class="mdl-layout__content">
        <div ng-show="user == null" class="form">
          <img class="logo" src="/img/logo_authentication.png">
          <form action="#">
            <div class="mdl-textfield mdl-js-textfield" ng-show="authentication_state == 'registering'">
              <input class="mdl-textfield__input" type="text" id="full_name" ng-model="authentication_full_name">
              <label class="mdl-textfield__label" for="full_name">Full Name</label>
            </div>
            
            <div class="mdl-textfield mdl-js-textfield {{ (authentication_error_email != '') ? 'is-invalid is-dirty' : '' }}" ng-show="authentication_state == 'signing_in' || authentication_state == 'registering'">
              <input class="mdl-textfield__input" type="text" id="email" ng-model="authentication_email">
              <label class="mdl-textfield__label" for="email">Email</label>
              <span class="mdl-textfield__error">{{ authentication_error_email }}</span>
            </div>
            
            <div class="mdl-textfield mdl-js-textfield {{ (authentication_error_password != '') ? 'is-invalid is-dirty' : '' }}" ng-show="authentication_state == 'signing_in' || authentication_state == 'registering'">
              <input class="mdl-textfield__input" type="password" id="password" ng-model="authentication_password">
              <label class="mdl-textfield__label" for="password">Password</label>
              <span class="mdl-textfield__error">{{ authentication_error_password }}</span>
            </div>
            
            <div class="mdl-textfield mdl-js-textfield {{ (authentication_error_confirm_password != '') ? 'is-invalid is-dirty' : '' }}" ng-show="authentication_state == 'registering'">
              <input class="mdl-textfield__input" type="password" id="confirm_password" ng-model="authentication_confirm_password">
              <label class="mdl-textfield__label" for="confirm_password">Confirm password</label>
              <span class="mdl-textfield__error">{{ authentication_error_confirm_password }}</span>
            </div>
            
            <a class="option link" href="" ng-show="authentication_state == 'registering'" target="_blank">
              Read Terms of Use
            </a>
            
            <div class="option have_read" ng-show="authentication_state == 'registering'">
              <label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox_terms_read">
                <input type="checkbox" class="mdl-checkbox__input" ng-model="terms_read" id="checkbox_terms_read" >
                <span class="mdl-checkbox__label">I have read Terms of Use</span>
              </label>
            </div>

            <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent" ng-disabled="((authentication_in_progress) || (authentication_state == 'registering' && !terms_read))" ng-click="authentication_confirm()">
              {{ (authentication_state == 'signing_in') ? ((authentication_in_progress) ? 'Signing in' : 'Sign in') : '' }}
              {{ (authentication_state == 'registering') ? ((authentication_in_progress) ? 'Registering' : 'Register') : '' }}
            </button>

            <a class="option" href="" ng-show="authentication_state == 'signing_in'">
              FORGOT PASSWORD?
            </a>

            <a class="option" href="" ng-show="authentication_state == 'signing_in'" ng-click="authentication_state_change('registering')">
              REGISTER
            </a>
            
            <a class="option" href="" ng-show="authentication_state == 'registering'" ng-click="authentication_state_change('signing_in')">
              SIGN IN
            </a>
          </form>
        </div>
      </main>
    </div>
    
    
    <!-- Main chat -->
    <div ng-show="user != null" class="chat mdl-layout mdl-js-layout mdl-layout--fixed-header">
      <main class="mdl-layout__content">
        <div class="mdl-grid">
          <div class="messages mdl-cell mdl-cell--10-col-desktop mdl-cell--12-col-tablet">
            <div class="head">
              Group Name
            </div>
            <div class="list" id="messages_list">
              <div class="message" ng-repeat="m in messages">
                {{ m.text }}
              </div>
            </div>
            <div class="new">
              <textarea placeholder="Type here..." ng-model="message" ng-disabled="sending_message" ng-keypress="message_keypressed($event)"></textarea>
              <button class="mdl-button mdl-js-button mdl-button--icon" ng-click="send_message()" ng-disabled="sending_message">
                <i class="material-icons">send</i>
              </button>
            </div>
          </div>
          <div class="users mdl-cell mdl-cell--2-col-desktop mdl-cell--hide-tablet">
            <div class="head">
              Group Users
            </div>
            <div class="list">
            </div>
          </div>
        </div>
      </main>
    </div>

    <script src="https://www.gstatic.com/firebasejs/3.3.0/firebase.js"></script>
    <script>
      // Initialize Firebase
      var config = {
        apiKey: "AIzaSyBWUlOJxaPjD_K4KKwNzA2OfwVbzTvRPWg",
        authDomain: "nyu-chat.firebaseapp.com",
        databaseURL: "https://nyu-chat.firebaseio.com",
        storageBucket: "nyu-chat.appspot.com",
      };
      firebase.initializeApp(config);
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-sanitize.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular-animate.min.js"></script>
    
    <script src="js/bundle.js"></script>
  </body>
</html>
